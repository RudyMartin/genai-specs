

## ğŸ“„ 1. **Standalone Preview Agent Integration Spec (Box + S3) â€“ 1-Pager**

**Title:** *Documentation Preview Agent: Standalone MVP with Box + Bedrock + S3 Integration*

---

### âœ… **Purpose**

Enable risk and compliance reviewers to securely preview documents stored in **Box**, auto-generate summaries, detect missing sections or compliance flags, and store versioned results â€” all through a **self-contained web app** (e.g., Streamlit or Flask+React), without relying on Salesforce or CRM plugins.

---

### ğŸ§© **Core Components**

| Component                 | Description                                                                                 |
| ------------------------- | ------------------------------------------------------------------------------------------- |
| ğŸ“ **Document Source**    | **Box** file picker or webhook; files linked or uploaded to Box workspace                   |
| ğŸ§  **LLM & Reasoning**    | Amazon Bedrock (Titan or Claude) + DSPy (deployed via Lambda, ECS, or internal API)         |
| ğŸ“¦ **Vector Store**       | Amazon **S3 Vector Search**; stores embedded document chunks + metadata                     |
| ğŸ§¾ **Metadata/Standards** | JSON-based rulesets stored in S3 or NoSQL DB (e.g., required sections by doc type)          |
| ğŸ–¥ï¸ **UI**                | Standalone Web App (Streamlit, Flask+React, or lightweight internal tool)                   |
| ğŸ” **Feedback Loop**      | All previews + human edits logged as versioned records in **S3** and/or relational database |

---

### ğŸ”„ **MVP Flow**

1. ğŸ“ **User selects or uploads a doc** via Box interface (link or direct selection)
2. ğŸ“„ **Webhook or manual trigger** sends Box `file_id` and metadata to the pipeline
3. ğŸ§  **Pipeline fetches file from Box**, parses it, embeds chunks, indexes in S3, runs DSPy with standards
4. ğŸª„ **LLM returns structured preview**: summary, flags, missing sections, and score
5. ğŸ’¬ **Web UI displays preview + edit pane**
6. ğŸ“ **User confirms/edits preview** â†’ result saved to S3 (JSON) with reviewer, version, score, and flag metadata

---

### ğŸ” **Roles & Permissions**

| Role     | Access                              |
| -------- | ----------------------------------- |
| Reviewer | View/edit/approve preview           |
| Admin    | Manage standards and rerun logic    |
| System   | Scoped access to Box and S3 buckets |

---

### ğŸ“¦ **Example Output (Preview JSON)**

```json
{
  "summary": "This model development plan lacks a performance monitoring section...",
  "issues_detected": ["Missing Risk Tier", "Outdated Reference to SR 11-7"],
  "compliance_score": 67,
  "box_file_id": "12345",
  "model_version": "titan-v2.0-sig3",
  "reviewer": "analyst_01",
  "timestamp": "2025-07-23T17:22Z"
}
```

---

### ğŸš§ **MVP Constraints**

* No Salesforce integration or CRM dependencies
* All logs stored in cloud-native services (S3, RDS, DynamoDB)
* Standards and scoring logic are JSON-defined, not schema-driven
* Preview re-run requires manual trigger or webhook from Box

---

## ğŸ“Š 2. **Mermaid Diagram â€” Box + S3 + DSPy Standalone Integration**

```mermaid
flowchart TD
    %% === USER INTERACTION ===
    A1[ğŸ“ User Selects or Uploads Box File] --> A2[ğŸ”— File ID Sent via Webhook or UI Trigger]

    %% === PIPELINE ===
    subgraph "ğŸ§  DSPy Preview Pipeline (AWS)"
        B1[ğŸ” Fetch Doc from Box API via App Token]
        B1 --> B2[ğŸ§© Parse + Embed with Bedrock]
        B2 --> B3[ğŸ“¦ Store Embeddings in S3 Vector Index]
        B3 --> B4[ğŸ” Search + Retrieve Relevant Chunks]
        B4 --> B5[ğŸª„ DSPy Summarize + Flag + Score]
        B5 --> B6[ğŸ“¤ Return JSON Preview]
    end

    %% === DISPLAY + LOGGING ===
    B6 --> C1[ğŸ–¥ï¸ Standalone Web UI Displays Preview]
    C1 --> C2[ğŸ“ User Edits/Confirms Summary]
    C2 --> C3[ğŸ“ Save to S3 + Optional Database]

    style B2 fill:#e0f3ff,stroke:#3399ff,stroke-width:2px
    style B5 fill:#f3edff,stroke:#9966cc,stroke-width:2px
```
